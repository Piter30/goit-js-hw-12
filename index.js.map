{"version":3,"file":"index.js","sources":["../src/js/app.js"],"sourcesContent":["import 'izitoast/dist/css/iziToast.min.css';\nimport iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport '@fortawesome/fontawesome-free/css/all.min.css';\nimport axios from 'axios';\n\nconst form = document.getElementById('search-form');\nconst gallery = document.getElementById('gallery');\nconst loader = document.getElementById('loader');\nconst loadMoreContainer = document.querySelector('.load-more-container');\nconst loadMoreBtn = document.getElementById('load-more');\nconst endMessage = document.getElementById('end-message');\n\nloadMoreBtn.textContent = 'Load more';\nloadMoreBtn.style.display = 'none';\nloadMoreContainer.appendChild(loadMoreBtn);\n\nconst API_KEY = '45874849-b987a1554bc8f853b4bc2ad05';\nlet currentPage = 1;\nlet currentQuery = '';\nlet totalHits = 0;\n\nform.addEventListener('submit', async e => {\n  e.preventDefault();\n  currentQuery = document.getElementById('search-query').value.trim();\n  if (currentQuery) {\n    currentPage = 1;\n    gallery.innerHTML = '';\n    loadMoreBtn.style.display = 'none';\n    endMessage.style.display = 'none';\n    await searchImages(currentQuery, currentPage);\n  } else {\n    iziToast.error({\n      title: 'Error',\n      message: 'Please enter a search term!',\n    });\n  }\n});\n\nasync function searchImages(query, page) {\n  loader.style.display = 'block';\n\n  try {\n    const response = await axios.get('https://pixabay.com/api/', {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: 'true',\n        page: page,\n        per_page: 40,\n      },\n    });\n\n    loader.style.display = 'none';\n    totalHits = response.data.totalHits;\n\n    if (response.data.hits.length > 0) {\n      displayImages(response.data.hits);\n      loadMoreBtn.style.display = 'block';\n      if (page * 40 >= totalHits) {\n        loadMoreBtn.style.display = 'none';\n        endMessage.style.display = 'block';\n      } else {\n        endMessage.style.display = 'none';\n      }\n      const galleryItemHeight = document\n        .querySelector('.gallery-item')\n        .getBoundingClientRect().height;\n      window.scrollBy({ top: galleryItemHeight * 2, behavior: 'smooth' });\n    } else {\n      iziToast.error({\n        title: 'No Results',\n        message: 'Sorry, no images found. Please try again!',\n      });\n    }\n  } catch (error) {\n    loader.style.display = 'none';\n    iziToast.error({\n      title: 'Error',\n      message: 'Something went wrong. Please try again!',\n    });\n  }\n}\n\nfunction displayImages(images) {\n  const galleryItems = images\n    .map(\n      image => `\n        <a href=\"${image.largeImageURL}\" class=\"gallery-item\">\n            <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n            <div class=\"image-info\">\n              <span><i class=\"fas fa-heart\"></i> ${image.likes}</span>\n              <span><i class=\"fas fa-eye\"></i> ${image.views}</span>\n              <span><i class=\"fas fa-comments\"></i> ${image.comments}</span>\n              <span><i class=\"fas fa-download\"></i> ${image.downloads}</span>\n            </div>\n        </a>\n    `\n    )\n    .join('');\n  gallery.innerHTML += galleryItems;\n\n  const lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n  });\n  lightbox.refresh();\n}\n\nloadMoreBtn.addEventListener('click', async () => {\n  currentPage++;\n  await searchImages(currentQuery, currentPage);\n});\n"],"names":["form","gallery","loader","loadMoreContainer","loadMoreBtn","endMessage","API_KEY","currentPage","currentQuery","totalHits","e","searchImages","iziToast","query","page","response","axios","displayImages","galleryItemHeight","images","galleryItems","image","SimpleLightbox"],"mappings":"owBAOA,MAAMA,EAAO,SAAS,eAAe,aAAa,EAC5CC,EAAU,SAAS,eAAe,SAAS,EAC3CC,EAAS,SAAS,eAAe,QAAQ,EACzCC,EAAoB,SAAS,cAAc,sBAAsB,EACjEC,EAAc,SAAS,eAAe,WAAW,EACjDC,EAAa,SAAS,eAAe,aAAa,EAExDD,EAAY,YAAc,YAC1BA,EAAY,MAAM,QAAU,OAC5BD,EAAkB,YAAYC,CAAW,EAEzC,MAAME,EAAU,qCAChB,IAAIC,EAAc,EACdC,EAAe,GACfC,EAAY,EAEhBT,EAAK,iBAAiB,SAAU,MAAMU,GAAK,CACzCA,EAAE,eAAc,EAChBF,EAAe,SAAS,eAAe,cAAc,EAAE,MAAM,OACzDA,GACFD,EAAc,EACdN,EAAQ,UAAY,GACpBG,EAAY,MAAM,QAAU,OAC5BC,EAAW,MAAM,QAAU,OAC3B,MAAMM,EAAaH,EAAcD,CAAW,GAE5CK,EAAS,MAAM,CACb,MAAO,QACP,QAAS,6BACf,CAAK,CAEL,CAAC,EAED,eAAeD,EAAaE,EAAOC,EAAM,CACvCZ,EAAO,MAAM,QAAU,QAEvB,GAAI,CACF,MAAMa,EAAW,MAAMC,EAAM,IAAI,2BAA4B,CAC3D,OAAQ,CACN,IAAKV,EACL,EAAGO,EACH,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,KAAMC,EACN,SAAU,EACX,CACP,CAAK,EAKD,GAHAZ,EAAO,MAAM,QAAU,OACvBO,EAAYM,EAAS,KAAK,UAEtBA,EAAS,KAAK,KAAK,OAAS,EAAG,CACjCE,EAAcF,EAAS,KAAK,IAAI,EAChCX,EAAY,MAAM,QAAU,QACxBU,EAAO,IAAML,GACfL,EAAY,MAAM,QAAU,OAC5BC,EAAW,MAAM,QAAU,SAE3BA,EAAW,MAAM,QAAU,OAE7B,MAAMa,EAAoB,SACvB,cAAc,eAAe,EAC7B,sBAAqB,EAAG,OAC3B,OAAO,SAAS,CAAE,IAAKA,EAAoB,EAAG,SAAU,QAAQ,CAAE,CACxE,MACMN,EAAS,MAAM,CACb,MAAO,aACP,QAAS,2CACjB,CAAO,CAEJ,MAAe,CACdV,EAAO,MAAM,QAAU,OACvBU,EAAS,MAAM,CACb,MAAO,QACP,QAAS,yCACf,CAAK,CACF,CACH,CAEA,SAASK,EAAcE,EAAQ,CAC7B,MAAMC,EAAeD,EAClB,IACCE,GAAS;AAAA,mBACIA,EAAM,aAAa;AAAA,wBACdA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA,mDAEXA,EAAM,KAAK;AAAA,iDACbA,EAAM,KAAK;AAAA,sDACNA,EAAM,QAAQ;AAAA,sDACdA,EAAM,SAAS;AAAA;AAAA;AAAA,KAIhE,EACA,KAAK,EAAE,EACVpB,EAAQ,WAAamB,EAEJ,IAAIE,EAAe,aAAc,CAChD,aAAc,MACd,aAAc,GAClB,CAAG,EACQ,QAAO,CAClB,CAEAlB,EAAY,iBAAiB,QAAS,SAAY,CAChDG,IACA,MAAMI,EAAaH,EAAcD,CAAW,CAC9C,CAAC"}